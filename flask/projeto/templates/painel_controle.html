<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0('static', filename='style.css')">
    <link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>
        {%block titulo%}
            MySnack
        {%endblock%}
    </title>

    <link rel="stylesheet" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
            <div id="pedidos">

            </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.js"></script>

    <script>

        const socket = io({autoConnect: false});
        socket.connect();
        var id = "salaFunc"
        //conectando ao quarto do user específico
        socket.emit("user_join", id);

    
        socket.on("PedidoNovo", (obj) => {
            var pedidos = document.getElementById("pedidos");
            var div = document.createElement("div");
            div.classList.add("boxPedido");
            div.innerHTML = `
                <h2>${obj.id}</h2>
                <h1>${obj.nome}</h1>
                <h2>Código: ${obj.codigo}</h2>
                <h2>Lanche: ${obj.lanche}</h2>
                <h2>Quantidade: ${obj.quantidade}</h2>
                <button onclick=confirmarPedido('${obj.id}')>COnfirmar Pedido</button>
                `;
            
            pedidos.appendChild(div);
        });

        function confirmarPedido(id){
            socket.emit("mandarMensagem", id);
            const button = event.target;
            const parent = button.parentNode;
            parent.remove();

            
        }


    </script>
            
        </div>
    </div>

    
</body>
</html>
